# Sprint 3: Complete visual-iteration Plugin - Final Push to 100% MVP

**Sprint Duration**: 2025-10-28 to 2025-11-11 (2 weeks)
**Generated**: 2025-10-28 07:33:38
**Source Backlog**: BACKLOG-2025-10-28-073338.md
**Source STATUS**: STATUS-2025-10-28-072913.md
**Sprint Goal**: Implement visual-iteration plugin to reach 100% MVP completion

---

## Sprint 3 Context: The Final 15%

### Sprint 2 Review - EXCEPTIONAL SUCCESS üéâ

**Achievements**: Extraordinary transformation from 5% to 85%

‚úÖ **agent-loop Plugin**: 100% COMPLETE
- 3,021 total lines (agent, commands, skills, hooks, README)
- 4 commands, 4 skills, 3 hooks
- Comprehensive documentation (715-line README)
- Zero placeholder content
- Production-ready

‚úÖ **epti Plugin**: 100% COMPLETE
- 7,688 total lines (agent, commands, skills, hooks, README)
- 6 commands, 5 skills, 4 hooks
- Exceptional documentation (1,238-line README)
- Multi-framework support (pytest, jest, go test)
- Zero placeholder content
- Production-ready

‚úÖ **Documentation Package**: 100% COMPLETE
- Root README (643 lines)
- Updated CLAUDE.md (240 lines)
- 2 plugin READMEs (1,953 lines)
- Total: 2,836 documentation lines (21% of total)

‚úÖ **Quality Standards**: EXCEPTIONAL
- 13,545 total lines delivered in 2 weeks
- Zero placeholder content
- Zero technical debt
- Framework-agnostic design
- Comprehensive examples
- Production-ready code

**Sprint 2 Grade**: A+ (97%)
**Sprint 2 Achievement**: +80 percentage points (5% ‚Üí 85%)
**Sprint 2 Velocity**: 6,773 lines per week average

### Sprint 3 Mission

**Single Focus**: Complete visual-iteration plugin to same quality standard as agent-loop and epti.

**Remaining Work**: 15% to reach 100% MVP
- 1 plugin to implement (visual-iteration)
- 1 README to write
- MCP server to configure
- Quality standards to maintain

**Success = 3 production-ready plugins with comprehensive documentation**

---

## Sprint 3 Goal

**Primary Objective**: Implement visual-iteration plugin matching the exceptional quality of Sprint 2 deliverables.

By end of Sprint 3, we must have:
1. ‚úÖ **visual-iteration agent** - Comprehensive workflow orchestration (~600-700 lines)
2. ‚úÖ **MCP configuration** - Browser automation for screenshot capture
3. ‚úÖ **Commands implemented** - Complete command set (~1,800-2,500 lines)
4. ‚úÖ **Skills implemented** - Robust reusable skills (~1,400-2,000 lines)
5. ‚úÖ **README created** - Exceptional documentation (~800-1,200 lines)
6. ‚úÖ **100% MVP COMPLETE** - All 3 plugins production-ready

**Completion Target**: 85% ‚Üí 100% (+15%)

**Quality Standard**: Match or exceed Sprint 2 quality (zero placeholders, comprehensive docs, production-ready)

---

## Sprint Backlog

### Week 1, Day 1-2 (Monday-Tuesday): Foundation & MCP Setup

#### DAY 1 MORNING: Research MCP Servers ‚ö° CRITICAL FIRST STEP

**Activity**: MCP availability research
**Effort**: 1-2 hours
**Owner**: Developer
**Priority**: CRITICAL - Informs implementation approach

**Research Tasks**:
- [ ] Verify browser-tools MCP availability in environment
- [ ] Test screenshot capture capability
- [ ] Verify playwright MCP availability (fallback)
- [ ] Document MCP capabilities and limitations
- [ ] Plan automated vs manual screenshot workflow
- [ ] Document setup requirements for README

**Testing Steps**:
1. Check available MCP tools: `mcp__browser-tools__*` and `mcp__playwright__*`
2. Test screenshot capture: `mcp__browser-tools__takeScreenshot` or `mcp__playwright__browser_take_screenshot`
3. Test browser navigation (if needed for web-based UIs)
4. Document any prerequisites or limitations
5. Create fallback plan if MCP unavailable

**Deliverable**: MCP capabilities document informing P1-9 and P1-10 implementation

---

#### DAY 1-2: P1-9 - Implement visual-iteration Main Agent

**Work Item**: P1-9
**Effort**: 6-8 hours
**Owner**: Developer
**Dependencies**: MCP research complete
**Status**: SPRINT 3 CRITICAL PATH

**Acceptance Criteria**:
- [ ] Agent file created: `plugins/visual-iteration/agents/visual-iteration-agent.md`
- [ ] Agent defines complete 6-stage visual iteration workflow
- [ ] Stage 1: Load visual mockup (accepts image file path)
- [ ] Stage 2: Implement design in code
- [ ] Stage 3: Capture screenshot (MCP or manual)
- [ ] Stage 4: Compare with detailed AI analysis
- [ ] Stage 5: Iterate (2-3 cycles minimum)
- [ ] Stage 6: Commit when satisfied
- [ ] Agent provides SPECIFIC, MEASURABLE feedback (not vague)
- [ ] Agent works with AND without MCP (graceful degradation)
- [ ] Agent includes subagent coordination for visual analysis
- [ ] Agent quality matches tdd-agent.md (~600-700 lines)
- [ ] .gitkeep removed from agents directory

**Implementation Strategy**:

```markdown
# visual-iteration-agent.md Structure

## Mission
You are the visual iteration agent, orchestrating the "Load Mock ‚Üí Implement ‚Üí Screenshot ‚Üí Compare ‚Üí Iterate ‚Üí Commit" workflow for pixel-perfect UI implementation.

## Workflow Stages

### Stage 1: Load Visual Mockup
[Guidance on accepting image file path or reference]
- Accept mockup from user (file path, clipboard, URL)
- Load image into context
- Extract visual requirements
- Transition to Stage 2

### Stage 2: Implement Design
[Guidance on initial implementation from mockup]
- Analyze mockup layout, colors, typography, spacing
- Generate HTML/CSS/framework code
- Focus on structural accuracy first
- DO NOT screenshot yet (no implementation exists)
- Transition to Stage 3

### Stage 3: Capture Screenshot
[Guidance on screenshot capture]
- If MCP available: Use browser-tools or playwright
- If no MCP: Prompt user to provide screenshot manually
- Ensure screenshot shows implementation
- Load screenshot into context
- Transition to Stage 4

### Stage 4: Visual Comparison
[CRITICAL - Detailed AI-based comparison]
- Spawn visual comparison subagent
- Subagent analyzes:
  * Layout: Element positions, alignment, spacing hierarchy
  * Colors: Hex values (#RRGGBB), contrast ratios
  * Typography: Fonts, sizes (px), weights, line-height
  * Spacing: Margins, padding (measured in px)
- Provide SPECIFIC, MEASURABLE feedback:
  ‚úÖ "Submit button top margin: 24px should be 16px (-8px)"
  ‚úÖ "Background: #F5F5F5 should be #FFFFFF"
  ‚úÖ "Font size: 14px should be 16px (+2px)"
  ‚ùå NOT: "Doesn't match" (too vague)
- Transition to Stage 5 if issues found, Stage 6 if perfect

### Stage 5: Iterate
[Guidance on refinement]
- Apply specific feedback from Stage 4
- Adjust implementation (CSS tweaks, measurements)
- Return to Stage 3 for new screenshot
- Iterate 2-3 times minimum for quality
- Transition to Stage 6 when user satisfied

### Stage 6: Commit
[Guidance on finalization]
- Verify final screenshot matches mockup
- Stage implementation files
- Create commit with descriptive message
- Document any intentional deviations
- Workflow complete

## Subagent Coordination

### Visual Comparison Subagent
When spawning comparison subagent:
1. Provide mockup image
2. Provide screenshot image
3. Ask subagent to analyze differences
4. Request specific measurements (px, hex, etc.)
5. Synthesize feedback into actionable guidance

## MCP Integration

### With browser-tools MCP:
[Commands for automated screenshot]
- Use `mcp__browser-tools__takeScreenshot`
- Capture full page or specific element
- Load screenshot automatically

### With playwright MCP:
[Commands for browser automation]
- Navigate to implementation
- Capture screenshot
- Return to agent workflow

### Without MCP (Manual Mode):
[Graceful degradation]
- Prompt user: "Please provide screenshot of implementation"
- Accept image file path or clipboard
- Continue with comparison

## Anti-Patterns
- ‚ùå Vague feedback ("looks different")
- ‚ùå Skipping iteration (settling for "close enough")
- ‚ùå Modifying mockup instead of implementation
- ‚ùå Implementing without mockup reference

## Quality Standards
- Measurements in pixels (not vague "slightly")
- Hex values exact (#RRGGBB format)
- Multiple iteration cycles (2-3 minimum)
- User satisfaction required before commit
```

**Quality Standard**: Match tdd-agent.md (636 lines) with comprehensive guidance

**Expected Lines**: 600-700 lines

**Deliverable**: `plugins/visual-iteration/agents/visual-iteration-agent.md` (~600-700 lines)

---

### Day 2-3 (Tuesday-Wednesday): MCP Configuration

#### DAY 2-3: P1-10 - Configure visual-iteration MCP Servers

**Work Item**: P1-10
**Effort**: 3-5 hours
**Owner**: Developer
**Dependencies**: P1-9 complete, MCP research complete
**Status**: ENABLES AUTOMATION

**Acceptance Criteria**:
- [ ] `.mcp.json` updated with browser automation MCP
- [ ] MCP server configured: browser-tools OR playwright
- [ ] Configuration includes connection details
- [ ] Screenshot capture tested and working
- [ ] Browser navigation tested (if applicable)
- [ ] Graceful fallback documented if MCP unavailable
- [ ] Setup instructions prepared for README
- [ ] Configuration tested end-to-end

**Implementation Steps**:

1. **Update `plugins/visual-iteration/.mcp.json`**:

Based on MCP research, configure appropriate server:

**Option 1: browser-tools MCP** (if available):
```json
{
  "mcpServers": {
    "browser-tools": {
      "command": "npx",
      "args": ["-y", "@executeautomation/mcp-browser-tools"],
      "env": {}
    }
  }
}
```

**Option 2: playwright MCP** (if browser-tools unavailable):
```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["-y", "@playwright/mcp-server"],
      "env": {}
    }
  }
}
```

**Option 3: Empty object** (manual screenshots only):
```json
{
  "mcpServers": {}
}
```

2. **Test MCP Configuration**:
   - Load plugin with MCP configuration
   - Verify MCP server initializes without error
   - Test screenshot capture command
   - Test browser navigation (if applicable)
   - Document any prerequisites (Node.js, npm, etc.)

3. **Document Setup**:
   - Create setup instructions for P2-4 README
   - Document MCP installation steps
   - Document troubleshooting for common issues
   - Document manual fallback workflow

4. **Verify Graceful Degradation**:
   - Test workflow WITH MCP (automated screenshots)
   - Test workflow WITHOUT MCP (manual screenshots)
   - Ensure agent handles both modes gracefully
   - Document mode detection in agent

**Deliverable**: Configured `.mcp.json` with tested MCP server OR documented manual workflow

---

### Day 3-5 (Wednesday-Friday): Commands & Skills Implementation

#### DAY 3-4: P1-11 - Implement visual-iteration Slash Commands

**Work Item**: P1-11
**Effort**: 3-4 hours
**Owner**: Developer
**Dependencies**: P1-9 complete (agent), P1-10 complete (MCP)
**Status**: CRITICAL PATH

**Acceptance Criteria**:
- [ ] `/load-mock` command created - accepts image file path
- [ ] `/implement-design` command created - implements UI from mockup
- [ ] `/screenshot` command created - captures current state
- [ ] `/compare` command created - detailed visual comparison
- [ ] `/iterate` command created - refines based on feedback
- [ ] `/visual-commit` command created - finalizes with git
- [ ] All commands in `plugins/visual-iteration/commands/`
- [ ] Commands registered in `plugin.json`
- [ ] Commands degrade gracefully (work without MCP)
- [ ] Each command 300-500 lines (following epti pattern)
- [ ] .gitkeep removed from commands directory

**Implementation Strategy** (following epti command pattern):

**1. `/load-mock` Command** (~300-350 lines):
```markdown
# Load Visual Mockup

## Mission
Load a visual design mockup as the target for implementation.

## Process
1. Accept mockup reference from user
   - File path: /path/to/mockup.png
   - Clipboard: Image from clipboard
   - URL: https://example.com/mockup.png
2. Load image into context
3. Analyze visual requirements:
   - Layout structure
   - Color palette
   - Typography
   - Spacing patterns
4. Extract key measurements if possible
5. Transition to /implement-design

## Usage Example
User: /load-mock /designs/login-form.png
Agent: [Loads image, analyzes] "I see a login form with..."

## Anti-Patterns
- ‚ùå Proceeding without mockup loaded
- ‚ùå Using wrong mockup version
- ‚ùå Skipping visual analysis

## Transition
Next stage: /implement-design
```

**2. `/implement-design` Command** (~350-400 lines):
```markdown
# Implement Design from Mockup

## Mission
Create initial implementation matching the loaded mockup.

## Process
1. Reference loaded mockup
2. Identify layout approach (flexbox, grid, etc.)
3. Extract color palette (hex values)
4. Identify fonts and sizes
5. Measure spacing (margins, padding)
6. Generate HTML/CSS/framework code
7. Focus on structural accuracy
8. Save implementation
9. Transition to /screenshot

## Usage Example
User: /implement-design using React + Tailwind
Agent: [Implements] "I've created the login form..."

## Anti-Patterns
- ‚ùå Implementing without mockup reference
- ‚ùå Guessing measurements instead of extracting
- ‚ùå Over-engineering (keep it simple)

## Transition
Next stage: /screenshot
```

**3. `/screenshot` Command** (~300-350 lines):
```markdown
# Capture Screenshot

## Mission
Capture screenshot of current implementation for comparison.

## Process

### With MCP (Automated):
1. Detect MCP availability
2. Navigate to implementation (if web-based)
3. Execute screenshot capture command
4. Load screenshot into context
5. Transition to /compare

### Without MCP (Manual):
1. Prompt user: "Please provide screenshot of implementation"
2. Accept image file path or clipboard
3. Load screenshot into context
4. Transition to /compare

## Usage Example
User: /screenshot
Agent (with MCP): [Captures automatically] "Screenshot captured"
Agent (no MCP): "Please provide screenshot at /path/to/screenshot.png"

## Transition
Next stage: /compare
```

**4. `/compare` Command** (~400-500 lines) - CRITICAL:
```markdown
# Visual Comparison

## Mission
Compare implementation screenshot to mockup with SPECIFIC, MEASURABLE feedback.

## Process
1. Load mockup and screenshot into context
2. Spawn visual comparison subagent
3. Subagent analyzes differences:
   - Layout: positions, alignment, spacing
   - Colors: hex values, contrast
   - Typography: fonts, sizes, weights
   - Spacing: margins, padding (in px)
4. Extract SPECIFIC feedback:
   ‚úÖ "Button width: 120px should be 140px (+20px)"
   ‚úÖ "Heading color: #333333 should be #000000"
   ‚ùå NOT: "Button looks wrong"
5. Provide actionable implementation guidance
6. Determine if iteration needed
7. Transition to /iterate (if issues) or /visual-commit (if perfect)

## Feedback Format
Layout:
- Element X position: 24px from left should be 32px (+8px)
- Heading alignment: left should be center

Colors:
- Background: #F5F5F5 should be #FFFFFF
- Button: #007BFF correct ‚úì

Typography:
- Heading font: 24px should be 32px (+8px)
- Body font: Arial should be Helvetica

Spacing:
- Container padding: 16px should be 24px (+8px)
- Button margin-top: 12px should be 16px (+4px)

## Usage Example
User: /compare
Agent: [Detailed analysis with measurements]

## Anti-Patterns
- ‚ùå Vague feedback ("doesn't match")
- ‚ùå Missing measurements
- ‚ùå Declaring "perfect" prematurely

## Transition
Next stage: /iterate (if issues) or /visual-commit (if perfect)
```

**5. `/iterate` Command** (~350-400 lines):
```markdown
# Iterate on Implementation

## Mission
Refine implementation based on comparison feedback.

## Process
1. Review specific feedback from /compare
2. Prioritize issues (layout > colors > spacing)
3. Apply changes systematically:
   - Adjust measurements (px values)
   - Fix colors (hex values)
   - Refine typography
4. Save updated implementation
5. Return to /screenshot for verification
6. Repeat cycle 2-3 times minimum

## Usage Example
User: /iterate
Agent: [Applies feedback] "Adjusted button width to 140px..."

## Iteration Guidelines
- Start with structural/layout issues
- Then colors and typography
- Finally fine-tune spacing
- Don't change mockup, only implementation
- Multiple small iterations > one big change

## Anti-Patterns
- ‚ùå Changing mockup instead of implementation
- ‚ùå Settling for "close enough" (iterate more!)
- ‚ùå Making unrelated changes

## Transition
Next stage: /screenshot (continue cycle)
```

**6. `/visual-commit` Command** (~350-400 lines):
```markdown
# Commit Visual Implementation

## Mission
Finalize and commit pixel-perfect implementation.

## Process
1. Verify final screenshot matches mockup
2. Document any intentional deviations
3. Stage implementation files
4. Generate commit message:
   - "feat(ui): implement [component] from mockup"
   - Include iteration count
   - Note any deviations
5. Execute git commit
6. Workflow complete

## Usage Example
User: /visual-commit
Agent: [Commits] "Committed login form (3 iterations)"

## Commit Message Format
feat(ui): implement login form from mockup

- Matched layout structure
- Applied color palette exactly
- Implemented typography specs
- 3 iteration cycles for pixel-perfect match
- No intentional deviations

## Anti-Patterns
- ‚ùå Committing before user satisfied
- ‚ùå Undocumented deviations
- ‚ùå Vague commit message

## Workflow Complete
Visual iteration cycle finished. Implementation matches mockup.
```

**Update `plugin.json`**:
```json
{
  "commands": [
    {
      "name": "load-mock",
      "description": "Load visual design mockup as target",
      "file": "commands/load-mock.md"
    },
    {
      "name": "implement-design",
      "description": "Create initial implementation from mockup",
      "file": "commands/implement-design.md"
    },
    {
      "name": "screenshot",
      "description": "Capture screenshot of implementation",
      "file": "commands/screenshot.md"
    },
    {
      "name": "compare",
      "description": "Compare implementation to mockup with detailed analysis",
      "file": "commands/compare.md"
    },
    {
      "name": "iterate",
      "description": "Refine implementation based on feedback",
      "file": "commands/iterate.md"
    },
    {
      "name": "visual-commit",
      "description": "Commit pixel-perfect implementation",
      "file": "commands/visual-commit.md"
    }
  ]
}
```

**Expected Lines**: 1,800-2,500 total (6 commands √ó 300-400 lines each)

**Quality Standard**: Match epti commands (2,805 lines, 6 commands)

**Deliverable**: 6 command files + updated plugin.json

---

#### DAY 4-5: P1-12 - Implement visual-iteration Skills

**Work Item**: P1-12
**Effort**: 3-4 hours
**Owner**: Developer
**Dependencies**: None (can be parallel with P1-11)
**Status**: CRITICAL PATH

**Acceptance Criteria**:
- [ ] `screenshot-capture.md` skill created
- [ ] `visual-comparison.md` skill created (CRITICAL)
- [ ] `design-implementation.md` skill created
- [ ] `visual-refinement.md` skill created
- [ ] All skills in `plugins/visual-iteration/skills/`
- [ ] Skills documented with clear usage examples
- [ ] Skills work independently of MCP availability
- [ ] Each skill 300-450 lines
- [ ] .gitkeep removed from skills directory

**Implementation Strategy**:

**1. `screenshot-capture.md` Skill** (~300-350 lines):
```markdown
# Screenshot Capture Skill

You are capturing screenshots of UI implementations for visual comparison.

## Mission
Capture high-quality screenshots using available tools (MCP or manual).

## MCP Mode (Automated)

### With browser-tools MCP:
1. Detect MCP availability
2. Execute screenshot command
3. Specify full page or element
4. Return screenshot path

### With playwright MCP:
1. Navigate to implementation
2. Wait for page load
3. Capture screenshot
4. Return screenshot

## Manual Mode (Fallback)

### Without MCP:
1. Prompt user for screenshot
2. Provide clear instructions:
   - Open implementation in browser
   - Capture full viewport
   - Save to /path/to/screenshot.png
3. Accept file path from user
4. Load screenshot into context

## Usage
[Examples of MCP commands and manual prompts]

## Quality Guidelines
- Full page capture preferred
- Ensure all elements visible
- Consistent viewport size
- High resolution (no blur)
```

**2. `visual-comparison.md` Skill** (~400-450 lines) - CRITICAL:
```markdown
# Visual Comparison Skill

You are performing detailed AI-based visual comparison between mockup and implementation.

## Mission
Analyze mockup vs screenshot and provide SPECIFIC, MEASURABLE feedback.

## Comparison Process

### Step 1: Layout Analysis
Compare element positioning and structure:
- Element positions (px from edges)
- Alignment (left/center/right, top/middle/bottom)
- Grid/flexbox structure
- Spacing hierarchy
- Visual balance

Feedback format:
‚úÖ "Header positioned 16px from top should be 24px (+8px)"
‚úÖ "Button centered horizontally ‚úì"
‚ùå NOT: "Layout is off"

### Step 2: Color Analysis
Compare color palette and application:
- Extract hex values (#RRGGBB)
- Compare backgrounds, text, accents
- Check contrast ratios (WCAG)
- Identify color mismatches

Feedback format:
‚úÖ "Background: #F5F5F5 should be #FFFFFF"
‚úÖ "Primary button: #007BFF correct ‚úì"
‚ùå NOT: "Colors look different"

### Step 3: Typography Analysis
Compare fonts, sizes, weights:
- Font families (with fallbacks)
- Font sizes (px, em, rem)
- Font weights (100-900)
- Line heights
- Letter spacing

Feedback format:
‚úÖ "Heading: 24px should be 32px (+8px)"
‚úÖ "Body font: Arial correct ‚úì"
‚ùå NOT: "Text size wrong"

### Step 4: Spacing Analysis
Compare margins and padding:
- Element margins (measured in px)
- Element padding (measured in px)
- Gap between elements
- White space distribution

Feedback format:
‚úÖ "Container padding: 16px should be 24px (+8px)"
‚úÖ "Button margin-top: 8px should be 12px (+4px)"
‚ùå NOT: "Spacing feels off"

## Subagent Coordination

Spawn visual analysis subagent:
```
You are analyzing visual differences between a mockup and implementation.

Mockup: [image]
Screenshot: [image]

Analyze:
1. Layout differences (positions, alignment)
2. Color mismatches (hex values)
3. Typography differences (fonts, sizes)
4. Spacing deltas (margins, padding in px)

Provide SPECIFIC, MEASURABLE feedback with exact values.
```

## Synthesis
Combine subagent analysis into actionable feedback:
- Prioritize issues (layout > colors > spacing)
- Group related issues
- Provide implementation guidance
- Estimate effort for fixes

## Quality Standards
- Always use measurements (px, hex)
- Never vague ("looks different")
- Actionable guidance required
- Prioritized issue list
```

**3. `design-implementation.md` Skill** (~350-400 lines):
```markdown
# Design Implementation Skill

You are implementing UI designs from visual mockups.

## Mission
Generate HTML/CSS/framework code matching mockup exactly.

## Analysis Phase

### Extract from Mockup:
1. Layout structure (grid, flexbox, absolute)
2. Color palette (backgrounds, text, accents)
3. Typography (fonts, sizes, weights)
4. Spacing patterns (margins, padding)
5. Element dimensions (widths, heights)

## Implementation Phase

### Layout First:
- Implement structural HTML
- Apply layout system (grid/flexbox)
- Position major elements

### Styling Second:
- Apply color palette
- Implement typography
- Add spacing (margins/padding)

### Details Last:
- Borders, shadows, transitions
- Responsive behavior
- Interactive states

## Code Quality
- Clean, semantic HTML
- Organized CSS (or framework classes)
- Reusable components
- Consistent naming

## Framework Support
[Examples for React, Vue, plain HTML/CSS]
```

**4. `visual-refinement.md` Skill** (~300-350 lines):
```markdown
# Visual Refinement Skill

You are iteratively refining UI implementation based on comparison feedback.

## Mission
Apply specific feedback to improve visual match.

## Refinement Process

### Prioritize Issues:
1. Layout/structure (blocking)
2. Colors (high visibility)
3. Typography (medium impact)
4. Spacing (fine-tuning)

### Apply Changes Systematically:
- One category at a time
- Test after each change
- Document adjustments

### Iteration Strategy:
- Cycle 1: Major layout and color issues
- Cycle 2: Typography and larger spacing
- Cycle 3: Fine-tune spacing and details

## Quality Guidelines
- Small, focused changes
- Multiple iterations > one big fix
- Test each change
- Don't change mockup, only code

## Anti-Patterns
- ‚ùå Changing everything at once
- ‚ùå Settling for "close enough"
- ‚ùå Unrelated improvements
```

**Expected Lines**: 1,400-2,000 total (4 skills √ó 350-450 lines each)

**Quality Standard**: Match agent-loop skills (1,763 lines, 4 skills)

**Deliverable**: 4 skill files in `plugins/visual-iteration/skills/`

---

### Day 5-7 (Friday-Sunday): Documentation

#### DAY 5-7: P2-4 - Create visual-iteration Plugin README

**Work Item**: P2-4
**Effort**: 2-3 hours
**Owner**: Developer
**Dependencies**: P1-9, P1-10, P1-11, P1-12 complete
**Status**: FINAL DELIVERABLE

**Acceptance Criteria**:
- [ ] `README.md` created in `plugins/visual-iteration/`
- [ ] Plugin purpose and when to use clearly explained
- [ ] 6-stage visual iteration workflow documented
- [ ] MCP server setup instructions (browser-tools/playwright)
- [ ] Manual screenshot fallback documented
- [ ] All 6 commands documented with examples
- [ ] All 4 skills documented with parameters
- [ ] Visual comparison process explained in detail
- [ ] Complete design iteration example
- [ ] Tips for pixel-perfect results
- [ ] Troubleshooting section
- [ ] README is 800-1,200 lines (epti quality standard)

**Implementation Strategy** (following epti README pattern):

```markdown
# visual-iteration Plugin

**Status**: ‚úÖ 100% Complete | **Version**: 0.1.0

Visual design iteration workflow: Load Mock ‚Üí Implement ‚Üí Screenshot ‚Üí Compare ‚Üí Iterate ‚Üí Commit

## When to Use

Perfect for:
- **Implementing UI from design mockups** (Figma, Sketch, Adobe XD)
- **Achieving pixel-perfect design implementation**
- **Visual regression testing** of UI changes
- **Design refinement and iteration** with measurable progress
- **Responsive design validation** across viewports

NOT suited for:
- Backend or API development
- Algorithmic implementations
- Non-visual features

## Visual Iteration Workflow

Our workflow ensures pixel-perfect implementation through systematic iteration:

### Stage 1: Load Mock (`/load-mock`)

Load your design mockup as the target for implementation.

**Usage**:
```
/load-mock /designs/login-form.png
```

**What happens**:
- Agent loads mockup image
- Analyzes visual requirements
- Extracts layout, colors, typography
- Prepares for implementation

**Tip**: Use high-resolution mockups for better extraction

---

### Stage 2: Implement (`/implement-design`)

Create initial implementation matching the mockup.

**Usage**:
```
/implement-design using React + Tailwind
```

**What happens**:
- Agent analyzes mockup structure
- Generates HTML/CSS/framework code
- Implements layout, colors, typography
- Saves implementation files

**Tip**: Start simple - structure first, details later

---

### Stage 3: Screenshot (`/screenshot`)

Capture screenshot of your implementation for comparison.

**Usage**:
```
/screenshot
```

**What happens**:

**With MCP** (automated):
- Agent detects MCP availability
- Automatically captures screenshot
- Loads screenshot for comparison

**Without MCP** (manual):
- Agent prompts for screenshot
- You capture and provide path
- Agent loads for comparison

**Tip**: Ensure implementation is visible before capturing

---

### Stage 4: Compare (`/compare`)

Detailed AI-based comparison with specific, measurable feedback.

**Usage**:
```
/compare
```

**What happens**:
- Agent compares mockup vs screenshot
- Analyzes layout, colors, typography, spacing
- Provides SPECIFIC feedback with measurements
- Determines if iteration needed

**Example Feedback**:
```
Layout:
‚úó Submit button: 24px from bottom should be 16px (-8px)
‚úì Header alignment: centered correctly

Colors:
‚úó Background: #F5F5F5 should be #FFFFFF
‚úì Button color: #007BFF correct

Typography:
‚úó Heading size: 24px should be 32px (+8px)
‚úì Body font: Helvetica correct

Spacing:
‚úó Container padding: 16px should be 24px (+8px)
‚úì Button margin: 12px correct
```

**Tip**: Feedback is actionable - apply exactly as specified

---

### Stage 5: Iterate (`/iterate`)

Refine implementation based on comparison feedback.

**Usage**:
```
/iterate
```

**What happens**:
- Agent applies specific feedback
- Adjusts measurements (px values)
- Fixes colors (hex values)
- Refines typography and spacing
- Returns to Stage 3 for verification

**Iteration Cycle**: Screenshot ‚Üí Compare ‚Üí Iterate (repeat 2-3 times)

**Tip**: Multiple small iterations beat one big fix

---

### Stage 6: Commit (`/visual-commit`)

Finalize and commit pixel-perfect implementation.

**Usage**:
```
/visual-commit
```

**What happens**:
- Agent verifies final match
- Stages implementation files
- Creates descriptive commit
- Documents iteration count
- Workflow complete

**Tip**: Only commit when YOU'RE satisfied with the match

---

## MCP Server Setup

### Option 1: browser-tools MCP (Recommended)

**Installation**:
```bash
npm install -g @executeautomation/mcp-browser-tools
```

**Configuration**: Already configured in `.mcp.json`

**Features**:
- Automated screenshot capture
- Browser console access
- Network monitoring

---

### Option 2: playwright MCP (Alternative)

**Installation**:
```bash
npm install -g @playwright/mcp-server
npx playwright install chromium
```

**Configuration**: Update `.mcp.json` if using

**Features**:
- Full browser automation
- Multi-browser support
- Advanced navigation

---

### Option 3: Manual Screenshots (No MCP)

**Process**:
1. Implement design in your project
2. Open in browser
3. Capture screenshot (Command+Shift+4 on Mac, Windows+Shift+S on Windows)
4. Provide screenshot path to agent
5. Continue with comparison

**Tip**: Manual mode works perfectly - MCP just automates capturing

---

## Available Commands

### `/load-mock` - Load Visual Mockup
Load design mockup as target for implementation.

**Parameters**:
- Mockup file path or reference

**Example**:
```
/load-mock /designs/checkout-page.png
```

---

### `/implement-design` - Implement from Mockup
Create initial implementation matching mockup.

**Parameters**:
- Framework/approach (optional)

**Examples**:
```
/implement-design using React + Tailwind
/implement-design with plain HTML/CSS
/implement-design using Vue + Bootstrap
```

---

### `/screenshot` - Capture Screenshot
Capture screenshot of current implementation.

**Parameters**: None (automatic detection)

**Example**:
```
/screenshot
```

**MCP Mode**: Automated capture
**Manual Mode**: Prompts for screenshot path

---

### `/compare` - Visual Comparison
Compare implementation to mockup with detailed feedback.

**Parameters**: None (uses loaded mockup and screenshot)

**Example**:
```
/compare
```

**Output**: Specific, measurable feedback on layout, colors, typography, spacing

---

### `/iterate` - Refine Implementation
Apply comparison feedback to improve match.

**Parameters**: None (uses latest comparison feedback)

**Example**:
```
/iterate
```

**Process**: Applies specific changes ‚Üí Returns to /screenshot

---

### `/visual-commit` - Commit Implementation
Finalize and commit pixel-perfect implementation.

**Parameters**: None

**Example**:
```
/visual-commit
```

**Generates**: Descriptive commit with iteration count

---

## Skills

### screenshot-capture
Captures screenshots using available tools (MCP or manual).

**Usage**: Invoked by `/screenshot` command
**Modes**: Automated (MCP) or manual fallback

---

### visual-comparison
Performs detailed AI-based comparison between mockup and screenshot.

**Usage**: Invoked by `/compare` command
**Analysis**: Layout, colors, typography, spacing
**Output**: Specific, measurable feedback

---

### design-implementation
Implements UI from visual mockup.

**Usage**: Invoked by `/implement-design` command
**Supports**: React, Vue, HTML/CSS, Tailwind, Bootstrap, etc.

---

### visual-refinement
Iteratively refines implementation based on feedback.

**Usage**: Invoked by `/iterate` command
**Strategy**: Prioritized, systematic changes

---

## Complete Example: Login Form

### Scenario
Implement login form from Figma mockup to pixel-perfect accuracy.

### Workflow

**1. Load Mockup**:
```
/load-mock /designs/login-form-figma-export.png
```
Agent: "I see a centered login form with email/password fields and blue submit button..."

**2. Implement**:
```
/implement-design using React + Tailwind
```
Agent creates components:
- LoginForm component
- Input fields with Tailwind classes
- Submit button with styling
Files saved to `src/components/LoginForm.jsx`

**3. Screenshot** (automated with MCP):
```
/screenshot
```
Agent: "Screenshot captured automatically"

**4. Compare**:
```
/compare
```
Agent feedback:
```
Layout:
‚úó Form container: 400px wide should be 380px (-20px)
‚úì Centered horizontally: correct

Colors:
‚úó Background: #F8F9FA should be #FFFFFF
‚úó Submit button: #0066CC should be #007BFF (+0x1333)

Typography:
‚úó Input labels: 14px should be 16px (+2px)
‚úì Submit button text: 16px correct

Spacing:
‚úó Input margin-bottom: 12px should be 16px (+4px)
‚úó Form padding: 24px should be 32px (+8px)
```

**5. Iterate** (Cycle 1):
```
/iterate
```
Agent applies feedback:
- Form container width: 400px ‚Üí 380px
- Background: #F8F9FA ‚Üí #FFFFFF
- Button color: #0066CC ‚Üí #007BFF
- Input labels: 14px ‚Üí 16px
- Input margin: 12px ‚Üí 16px
- Form padding: 24px ‚Üí 32px

**6. Screenshot** ‚Üí **Compare** (Cycle 2):
```
/screenshot
/compare
```
Agent feedback:
```
Layout: ‚úì All correct
Colors: ‚úì All correct
Typography: ‚úì All correct
Spacing:
‚úó Submit button margin-top: 16px should be 20px (+4px)
```

**7. Iterate** (Cycle 2):
```
/iterate
```
Agent applies final feedback:
- Button margin-top: 16px ‚Üí 20px

**8. Screenshot** ‚Üí **Compare** (Cycle 3):
```
/screenshot
/compare
```
Agent: "Perfect match! All measurements and colors accurate."

**9. Commit**:
```
/visual-commit
```
Agent commits:
```
feat(ui): implement login form from Figma mockup

- Matched layout structure (centered, 380px wide)
- Applied color palette exactly (#FFFFFF bg, #007BFF button)
- Implemented typography specs (16px labels, correct weights)
- 3 iteration cycles for pixel-perfect match
- No intentional deviations from mockup
```

**Result**: Pixel-perfect login form matching Figma mockup exactly

---

## Tips for Pixel-Perfect Results

1. **Use High-Resolution Mockups**
   - Export at 2x resolution from Figma/Sketch
   - Ensures accurate color and spacing extraction

2. **Extract Exact Values**
   - Use Figma/Sketch inspector for hex colors
   - Document spacing values before starting
   - Don't guess - measure

3. **Iterate Multiple Times**
   - First pass: 70-80% accuracy expected
   - Second pass: 90-95% accuracy
   - Third pass: 98-100% accuracy
   - Don't settle early!

4. **Use Specific Units**
   - Prefer px over % for exact matching
   - Use exact hex values (#RRGGBB)
   - Document any intentional deviations

5. **Test Multiple Viewports**
   - Desktop, tablet, mobile
   - Capture screenshots at each size
   - Ensure responsive behavior matches

6. **Compare in Same Context**
   - Same browser for screenshot and mockup viewing
   - Same zoom level
   - Same color profile

---

## Troubleshooting

### MCP Server Won't Initialize

**Problem**: "MCP server connection failed"

**Solutions**:
1. Install MCP server: `npm install -g @executeautomation/mcp-browser-tools`
2. Check Node.js version: `node --version` (requires 16+)
3. Restart Claude Code
4. Use manual screenshot mode (fallback)

---

### Screenshot Capture Fails

**Problem**: Screenshot command returns error

**Solutions**:
1. Verify implementation is running (web server started)
2. Check browser is accessible
3. Try manual screenshot mode
4. Verify file paths are correct

---

### Comparison Feedback Too Vague

**Problem**: "Layout is off" instead of specific measurements

**Solutions**:
1. Provide higher resolution images
2. Ensure mockup and screenshot are same viewport size
3. Use /compare command again with context refresh
4. Manually extract measurements from design tool

---

### Colors Don't Match Exactly

**Problem**: Colors close but not exact hex values

**Solutions**:
1. Check color profile (sRGB recommended)
2. Export mockup with correct color space
3. Use eyedropper tool to verify hex values
4. Manually specify hex values in iteration

---

### Implementation Different from Screenshot

**Problem**: Code changes don't appear in screenshot

**Solutions**:
1. Ensure code is saved
2. Refresh browser before screenshot
3. Check for caching issues (hard refresh)
4. Verify correct page/component being captured

---

## Supported Platforms

- **Web Applications** (HTML/CSS/JavaScript frameworks)
- **React** (with CSS, Tailwind, Bootstrap, Material-UI)
- **Vue** (with CSS, Tailwind, Vuetify)
- **Plain HTML/CSS**
- **Static Sites** (Jekyll, Hugo, etc.)

**Future Support** (post-MVP):
- iOS apps (Xcode simulator screenshots)
- Android apps (Android emulator screenshots)
- Desktop apps (Electron, etc.)

---

## Testing

Manual testing performed with sample login form implementation.
- All 6 commands execute successfully
- MCP integration verified with browser-tools
- Manual fallback mode tested and working
- 3-iteration cycle achieved pixel-perfect match

---

## License & Author

**License**: MIT
**Author**: Brandon Fryslie
**Version**: 0.1.0
**Status**: Production Ready

---

## Related Plugins

- **agent-loop**: Disciplined engineering workflow (Explore ‚Üí Plan ‚Üí Code ‚Üí Commit)
- **epti**: Test-driven development (Tests First, Always)

For complete marketplace documentation, see [root README](../../README.md).
```

**Expected Lines**: 800-1,200 lines

**Quality Standard**: Match epti README (1,238 lines) with comprehensive tutorial approach

**Deliverable**: `plugins/visual-iteration/README.md` (~800-1,200 lines)

---

## Sprint Metrics & Tracking

### Velocity Target

**Sprint 3 Metrics**:
- **Work Items**: 5 items (4 P1 + 1 P2)
- **Estimated Hours**: 17-24 hours
- **Duration**: 2 weeks (allows quality over speed)
- **Success Rate**: 100% of planned items
- **Quality Gate**: Match Sprint 2 standards (zero placeholders, comprehensive docs)

### Daily Progress Tracking

| Day | Focus | Items | Hours | Deliverables |
|-----|-------|-------|-------|--------------|
| 1 (Mon) | Research & Agent | MCP research, P1-9 (partial) | 4-5 | MCP capabilities, agent started |
| 2 (Tue) | Agent & MCP | P1-9 (complete), P1-10 | 4-5 | visual-iteration-agent.md, .mcp.json |
| 3 (Wed) | Commands Start | P1-11 (partial) | 3-4 | 3 commands created |
| 4 (Thu) | Commands Finish + Skills Start | P1-11 (complete), P1-12 (partial) | 3-4 | 6 commands, 2 skills |
| 5 (Fri) | Skills Finish | P1-12 (complete) | 2-3 | 4 skills completed |
| 6-7 (Sat-Sun) | Documentation | P2-4 | 2-3 | README.md complete |

**Total**: 18-24 hours over 7 days (with buffer week for quality)

---

### Success Metrics

**Sprint 3 Complete When**:
- [ ] P1-9: visual-iteration agent implemented (~600-700 lines)
- [ ] P1-10: MCP servers configured and tested
- [ ] P1-11: 6 commands implemented (~1,800-2,500 lines)
- [ ] P1-12: 4 skills implemented (~1,400-2,000 lines)
- [ ] P2-4: README documentation created (~800-1,200 lines)
- [ ] visual-iteration plugin 100% complete
- [ ] All 3 plugins production-ready
- [ ] Overall completion: 95-100%
- [ ] Quality matches Sprint 2 (zero placeholders, comprehensive)

**Expected Total Lines** (visual-iteration):
- Agent: 600-700 lines
- Commands: 1,800-2,500 lines
- Skills: 1,400-2,000 lines
- README: 800-1,200 lines
- **Total**: ~4,600-6,400 lines

**Project Grand Total** (all 3 plugins):
- Existing: 13,545 lines (agent-loop + epti + docs)
- New: ~4,600-6,400 lines (visual-iteration)
- **Grand Total**: ~18,000-20,000 lines

---

## Definition of Done

### Work Item "Done" Criteria
- [ ] Code/content written and committed
- [ ] Acceptance criteria all checked
- [ ] No placeholder content (TODO, TBD, etc.)
- [ ] Follows quality standards from Sprint 2
- [ ] Documented (inline or README)
- [ ] .gitkeep files removed if directory populated
- [ ] Consistent formatting and structure

### Sprint "Done" Criteria
- [ ] Sprint goal achieved (visual-iteration 100%, MVP 100%)
- [ ] All 5 work items completed
- [ ] visual-iteration plugin production-ready
- [ ] README documentation comprehensive
- [ ] All 3 plugins functional
- [ ] Overall completion: 95-100%
- [ ] Quality matches Sprint 2 standards
- [ ] Sprint retrospective completed
- [ ] 100% MVP ACHIEVED üéâ

---

## Risk Management

### Critical Risks: NONE ‚úÖ

Sprint 2's exceptional execution eliminated all critical risks.

### Medium Risks

1. **MCP Server Complexity**
   - **Impact**: MEDIUM - May need manual screenshots
   - **Probability**: LOW - browser-tools appears available
   - **Mitigation**: Test early (Day 1), design for both modes
   - **Contingency**: Manual screenshot workflow (already designed)

2. **Visual Comparison Quality**
   - **Impact**: MEDIUM - Feedback may not be specific enough
   - **Probability**: LOW - Claude's vision is strong
   - **Mitigation**: Prompt engineering, examples, iteration
   - **Contingency**: Manual measurements supplement AI

### Mitigation Strategies

- **Early MCP Testing**: Day 1 research prevents late surprises
- **Graceful Degradation**: Design works without MCP
- **Prompt Engineering**: Iterate on comparison prompt quality
- **Quality Buffer**: 2-week timeline allows refinement

**Overall Sprint 3 Risk**: VERY LOW

---

## Handoff to Post-MVP

### Sprint 3 Deliverables

Upon completion:
- ‚úÖ visual-iteration plugin 100% complete (~4,600-6,400 lines)
- ‚úÖ All 3 plugins production-ready
- ‚úÖ Comprehensive documentation (4 READMEs total)
- ‚úÖ 100% MVP ACHIEVED
- ‚úÖ Overall completion: 95-100%
- ‚úÖ Quality maintained from Sprint 2

### Post-MVP Opportunities

**Optional Enhancements** (not blocking MVP):
1. **P2-8**: Validation scripts (3-4 hours)
2. **P2-9**: Integration tests (6-8 hours)
3. **P3-1**: Advanced thinking modes (2-3 hours/plugin)
4. **P3-3**: Visual diff metrics (6-8 hours)

**Manual Testing** (when environment available):
- Test visual-iteration end-to-end
- Verify MCP integration
- Document results with screenshots

**Future Extensions**:
- iOS simulator support
- Android emulator support
- Multi-platform visual testing
- Additional test frameworks
- CLI management tool

---

## Sprint 3 Success Indicators

### Sprint Success = 100% MVP Achieved

1. ‚úÖ visual-iteration agent comprehensive (~600-700 lines)
2. ‚úÖ MCP servers configured (automated screenshots)
3. ‚úÖ 6 commands implemented (~1,800-2,500 lines)
4. ‚úÖ 4 skills implemented (~1,400-2,000 lines)
5. ‚úÖ README exceptional (~800-1,200 lines)
6. ‚úÖ All 3 plugins production-ready
7. ‚úÖ Overall completion: 95-100%
8. ‚úÖ Quality matches Sprint 2 (zero placeholders)

### Sprint Exceeds Expectations If:
- Manual testing completed during sprint
- Visual-iteration tested end-to-end with results
- MCP integration flawless
- README includes video examples
- Zero issues discovered
- Validation script (P2-8) also completed

---

## Lessons from Sprint 2 (Apply to Sprint 3)

### Keep Doing:
- **Implementation-first approach** - Build comprehensively
- **Quality-first mindset** - No shortcuts, no placeholders
- **Exceptional documentation** - 20%+ documentation ratio
- **Zero technical debt** - Production-ready from start

### Start Doing:
- **Test as you build** - Don't wait until end
- **MCP research early** - Know capabilities before implementing
- **Documentation continuously** - Update CLAUDE.md if anything changes

### Stop Doing:
- **Accumulating untested code** - Test early and often
- **Deferring documentation** - Write while context fresh

---

## Notes

- **Quality Standard**: Sprint 2 set the bar at A+ (97%) - match it
- **Timeline Flexibility**: 2 weeks allows quality over speed
- **MCP Integration**: Research early, test immediately
- **Visual Comparison**: Specific measurements, not vague feedback
- **Documentation Excellence**: 21% documentation ratio is ideal
- **Celebrate Success**: Sprint 2 was exceptional, Sprint 3 completes journey
- **100% MVP**: Final push to complete marketplace vision

---

## Quick Reference

### File Locations
- **visual-iteration agent**: `plugins/visual-iteration/agents/visual-iteration-agent.md`
- **MCP config**: `plugins/visual-iteration/.mcp.json`
- **Commands**: `plugins/visual-iteration/commands/` (6 files)
- **Skills**: `plugins/visual-iteration/skills/` (4 files)
- **README**: `plugins/visual-iteration/README.md`

### Sprint 3 Checklist
Before marking complete:
- [ ] Agent comprehensive (~600-700 lines)
- [ ] MCP configured and tested
- [ ] 6 commands implemented
- [ ] 4 skills implemented
- [ ] README comprehensive (~800-1,200 lines)
- [ ] .gitkeep files removed
- [ ] No placeholder content
- [ ] Quality matches Sprint 2
- [ ] Plugin registered in marketplace.json
- [ ] All paths correct in plugin.json

---

## File Provenance

**Source STATUS Report**: STATUS-2025-10-28-072913.md (Sprint 2 COMPLETE)
**Source Backlog**: BACKLOG-2025-10-28-073338.md (Sprint 3 focus)
**Sprint Plan Version**: 3 (Final MVP push)
**Generated By**: status-planner agent
**Generation Timestamp**: 2025-10-28 07:33:38

**Supersedes**:
- SPRINT-02-2025-10-28-070303.md (Sprint 2 Week 2 - COMPLETE)
- SPRINT-02-2025-10-28-063531.md (Sprint 2 initial - COMPLETE)
- SPRINT-01-2025-10-28-062900.md (Sprint 1 - COMPLETE)

**Context**:
- Sprint 1: 5% ‚Üí 35% COMPLETE
- Sprint 2: 35% ‚Üí 85% COMPLETE (exceptional)
- Sprint 3 Target: 85% ‚Üí 100% COMPLETE (final push)
- Status: 2 of 3 plugins production-ready, final 15% in focus
- Goal: 100% MVP - All 3 plugins functional and documented
